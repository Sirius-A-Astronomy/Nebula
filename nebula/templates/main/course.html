{% extends "layouts/base.html" %}
{% block title %}{{ course.name }}- Nebula{% endblock %}
{% block include_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/views/course.css') }}">
{% endblock %}
{% macro question_view(question) -%}
<div class="question-list-item">
    <a
        href="{{ url_for('question.question', course_code=question.course.code, question_uuid=question.uuid) }}">
        <div class="text-primary question-title">{{ question.title }}</div>
    </a>
    <div class="text-secondary question-info-main">
        Posted {{ pretty_date(question.created_at)}}
        by <a href="#!" class="text-secondary">
            {{ question.user.username }}
            <!-- by <a href=" url_for('user.user', user_uuid=question.user.uuid) "> -->
        </a>
    </div>
    <div class="text-tertiary question-info">
        {% if question.comments|count == 1 %}
        {{ question.comments|count }} comment ·
        {% else %}
        {{ question.comments|count }} comments ·
        {% endif %}

        {% if question.answers == 1 %}
        {{ question.answers|count }} answer
        {% else %}
        {{ question.answers|count }} answers
        {% endif %}
    </div>
</div>
{% endmacro %}

{% block body %}
<main>
    <section class="container">
        <h2>{{ course.name }} {{ course.code }}</h2>
        <p class="text-secondary">
            {{ course.description }}
        </p>
        <h3>Questions</h3>
        <a href="{{ url_for('add_question.add_question', course_code=course.code)}}"
            class="btn btn-primary">Add a
            question</a>
        <div class="question-list-container">
            {% for question in questions|sort(attribute='created_at', reverse=true) %}
            {{ question_view(question) }}
            {% endfor %}
        </div>
    </section>
</main>
{% endblock %}